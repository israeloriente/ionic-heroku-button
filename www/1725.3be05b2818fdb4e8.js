"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1725],{51725:(q,h,a)=>{a.r(h),a.d(h,{AbastecimentoPageModule:()=>I});var d=a(69808),m=a(34182),s=a(23349),u=a(51421),c=a(70655),b=a(6762),A=a(84995),f=a(56329),_=a(55041),v=a(13026),Z=a(25344),C=a(99270),t=a(6435),T=a(74545);function y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-select-station",14),t.NdJ("response",function(){return t.CHM(e),t.oxw().responseSelectStation()}),t.qZA()}}function x(o,r){1&o&&(t.TgZ(0,"ion-text",20),t._uU(1,"Nenhum hist\xf3rico recente!"),t.qZA())}function P(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"ion-item-sliding"),t.TgZ(1,"ion-item",5),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).infoCar(l)}),t.TgZ(2,"ion-avatar",1),t._UZ(3,"img",21),t.qZA(),t.TgZ(4,"ion-label"),t.TgZ(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"h6"),t._uU(8),t.qZA(),t.qZA(),t.TgZ(9,"div",4),t._uU(10),t.ALo(11,"date"),t.qZA(),t.qZA(),t.TgZ(12,"ion-item-options",22),t.TgZ(13,"ion-item-option",23),t.NdJ("click",function(){const n=t.CHM(e),l=n.$implicit,g=n.index;return t.oxw(2).delete(l,g)}),t._uU(14," Delete "),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(6),t.Oqu(e.plate),t.xp6(2),t.Oqu(e.chef),t.xp6(2),t.hij(" ",t.xi3(11,3,e.created,"HH:mm")," ")}}function U(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"ion-item"),t.TgZ(2,"ion-label"),t._uU(3,"Mostrar de outras pessoas"),t.qZA(),t.TgZ(4,"ion-toggle",15),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().showAll=n})("ionChange",function(){return t.CHM(e),t.oxw().getAbs()}),t.qZA(),t.qZA(),t.TgZ(5,"ion-item",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().AC.Config.station=void 0}),t.TgZ(6,"ion-label"),t._uU(7,"Esta\xe7\xe3o em uso"),t.qZA(),t.TgZ(8,"div",4),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div",17),t.TgZ(11,"ion-content"),t.YNc(12,x,2,0,"ion-text",18),t.YNc(13,P,15,6,"ion-item-sliding",19),t._UZ(14,"br"),t._UZ(15,"br"),t._UZ(16,"br"),t._UZ(17,"br"),t._UZ(18,"br"),t._UZ(19,"br"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.showAll),t.xp6(5),t.AsE("",e.AC.getStation.name," (",e.AC.getStation.zona.get("name"),")"),t.xp6(3),t.Q6J("ngIf",!e.AC.getAbs.length),t.xp6(1),t.Q6J("ngForOf",e.AC.getAbs)}}const J=[{path:"",component:(()=>{class o{constructor(e,i,n,l,g,p){this.global=e,this.modal=i,this.parse=n,this.AC=l,this.moment=g,this.device=p,this.blockPlate=!1,this.showAll=!1,this.getAbs()}getAbs(){var e;return(0,c.mG)(this,void 0,void 0,function*(){yield this.global.simpleLoading(),this.parse.getAbs(null===(e=this.AC.getStation)||void 0===e?void 0:e.id,this.showAll).then(i=>(0,c.mG)(this,void 0,void 0,function*(){this.AC.Config.abs=yield this.moment.sortLast(i),yield this.global.cancelLoad()})).catch(i=>{this.parse.erroValidators(i).then(n=>(0,c.mG)(this,void 0,void 0,function*(){return yield this.global.simpleToast(n,5e3)}))})})}infoCar(e){return(0,c.mG)(this,void 0,void 0,function*(){const i=yield this.modal.create({component:C.n,cssClass:"modalInfoCar",backdropDismiss:!0,componentProps:{car:e,typeInfo:"Abs"}});return i.onDidDismiss().then(n=>(0,c.mG)(this,void 0,void 0,function*(){null!=n.data&&(this.AC.Config.abs=this.AC.Config.abs.filter(l=>l.id!=n.data.id))})),i.present()})}openKeyboard(e,i){return(0,c.mG)(this,void 0,void 0,function*(){yield this.global.simpleLoading(),this.blockPlate=!0,(yield this.global.checkDay())||(this.AC.Config.abs=yield this.global.newDay());const n=yield this.modal.create({component:f.p,backdropDismiss:!0,componentProps:{currentStation:this.AC.getStation,user:this.AC.getUser,typeEscanner:e,plate:i,typeInfo:"Abs"}});return yield this.global.cancelLoad(),n.onDidDismiss().then(l=>(0,c.mG)(this,void 0,void 0,function*(){null!=l.data&&(this.AC.Config.abs.push(l.data),this.blockPlate=!1,this.AC.Config.abs=yield this.moment.sortLast(this.AC.Config.abs))})),yield n.present()})}responseSelectStation(){this.showAll||this.getAbs()}delete(e,i){return(0,c.mG)(this,void 0,void 0,function*(){(yield this.global.checkDay())?(yield this.global.confirmAlert("Opera\xe7\xe3o irrevers\xedvel","Abastecimento ser\xe1 removido!","Cancelar","Remover"))?(yield this.global.simpleLoading(),this.parse.removeAbs(e.id).then(n=>(0,c.mG)(this,void 0,void 0,function*(){this.AC.Config.abs.splice(i,1),this.global.simpleToast("Abastecimento removido com sucesso",400),yield this.global.cancelLoad()})).catch(n=>(0,c.mG)(this,void 0,void 0,function*(){yield this.global.cancelLoad(),"ParseError: 101 Object not found."==n?this.global.simpleToast("Voc\xea n\xe3o permiss\xe3o para remover "+e.plate,5e3):this.parse.erroValidators(n).then(l=>(0,c.mG)(this,void 0,void 0,function*(){return yield this.global.simpleToast(l,5e3)}))}))):yield this.global.cancelLoad():this.AC.Config.abs=yield this.global.newDay()})}scan(){return(0,c.mG)(this,void 0,void 0,function*(){this.device.scan().then(e=>(0,c.mG)(this,void 0,void 0,function*(){this.device.stopScan();const i=yield this.global.validatePlate(e);i&&(this.blockPlate?this.modal.dismiss()&&this.openKeyboard("code",i):this.openKeyboard("code",i))}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.U),t.Y36(s.IN),t.Y36(A.X),t.Y36(_.y),t.Y36(Z._),t.Y36(v.U))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-abastecimento"]],decls:17,vars:5,consts:[["color","dark"],["slot","start"],["defaultHref","home","color","light"],["color","light"],["slot","end"],[3,"click"],["name","refresh-outline","color","light"],[3,"response",4,"ngIf"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","success",3,"disabled","click"],["name","barcode-outline"],["color","dark",3,"disabled","click"],["name","add","color","light"],[3,"response"],["mode","ios","color","dark",3,"ngModel","ngModelChange","ionChange"],["item","",3,"click"],[2,"height","73vh"],["class","centralizeTotal",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"centralizeTotal"],["src","../../assets/img/carLogo.png","alt",""],["side","end"],["color","danger","expandable","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header"),t.TgZ(1,"ion-toolbar",0),t.TgZ(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title",3),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",4),t.TgZ(7,"ion-button",5),t.NdJ("click",function(){return i.getAbs()}),t._UZ(8,"ion-icon",6),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"ion-content"),t.YNc(10,y,1,0,"app-select-station",7),t.YNc(11,U,20,5,"div",8),t.qZA(),t.TgZ(12,"ion-fab",9),t.TgZ(13,"ion-fab-button",10),t.NdJ("click",function(){return i.scan()}),t._UZ(14,"ion-icon",11),t.qZA(),t.TgZ(15,"ion-fab-button",12),t.NdJ("click",function(){return i.openKeyboard("keyboard","")}),t._UZ(16,"ion-icon",13),t.qZA(),t.qZA()),2&e&&(t.xp6(5),t.hij("",i.AC.getAbs.length," Abastecimentos"),t.xp6(5),t.Q6J("ngIf",!i.AC.stationIsValid),t.xp6(1),t.Q6J("ngIf",i.AC.stationIsValid),t.xp6(2),t.Q6J("disabled",!i.AC.stationIsValid),t.xp6(2),t.Q6J("disabled",!i.AC.stationIsValid))},directives:[s.Gu,s.sr,s.Sm,s.oU,s.cs,s.wd,s.YG,s.gu,s.W2,d.O5,T.E,s.Ie,s.Q$,s.ho,s.w,m.JJ,m.On,s.yW,d.sg,s.td,s.BJ,s.IK,s.u8,s.IJ,s.W4],pipes:[d.uU],styles:["ion-fab-button[_ngcontent-%COMP%]{margin-top:15%}"]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(J)],u.Bz]}),o})();var k=a(45642);let I=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,m.u5,s.Pc,M,k.K]]}),o})()}}]);